<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Run this • PETDiagnostics</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run this">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PETDiagnostics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">v0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Checks.html">Checks</a></li>
    <li><a class="dropdown-item" href="../articles/Introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/Run%20this.html">Run this</a></li>
    <li><a class="dropdown-item" href="../articles/Summary.html">Summary</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Run this</h1>
            
      

      <div class="d-none name"><code>Run this.Rmd</code></div>
    </div>

    
    
<p>This file depicts example code on how to set up a “Code to run” file
for the database connection to use PETDiagnostics. The mothertable and
babytable are not yet part of the official cdm therefore they need to
added to the cdm.</p>
<div class="section level3">
<h3 id="example-for-rpostgres">example for RPostgres<a class="anchor" aria-label="anchor" href="#example-for-rpostgres"></a>
</h3>
<p>library(PETDiagnostics)<br>
library(CDMConnector)<br>
library(dplyr)</p>
</div>
<div class="section level3">
<h3 id="database-connection-details">Database connection details<a class="anchor" aria-label="anchor" href="#database-connection-details"></a>
</h3>
<p>server_dbi&lt;-Sys.getenv(“SERVER_DBI”)<br>
port&lt;-Sys.getenv(“DB_PORT”)<br>
host&lt;-Sys.getenv(“DB_HOST”)<br>
user&lt;-Sys.getenv(“DB_USER”)<br>
password&lt;-Sys.getenv(“DB_PASSWORD”)</p>
</div>
<div class="section level3">
<h3 id="to-add-bigint-integer-or-alternatively-bigint-numeric-is-very-important">to add bigint = “integer” or alternatively bigint = “numeric” is
very important<a class="anchor" aria-label="anchor" href="#to-add-bigint-integer-or-alternatively-bigint-numeric-is-very-important"></a>
</h3>
<p>con &lt;- DBI::dbConnect(RPostgres::Postgres(),<br>
dbname = server_dbi,<br>
port = port,<br>
host = host,<br>
user = user,<br>
password = password,<br>
bigint = “integer”)</p>
</div>
<div class="section level3">
<h3 id="the-name-of-the-schema-that-contains-the-omop-cdm-with-patient-level-data">The name of the schema that contains the OMOP CDM with patient-level
data<a class="anchor" aria-label="anchor" href="#the-name-of-the-schema-that-contains-the-omop-cdm-with-patient-level-data"></a>
</h3>
<p>cdm_database_schema&lt;-Sys.getenv(“DB_CDM_SCHEMA”)</p>
</div>
<div class="section level3">
<h3 id="the-name-of-the-schema-that-contains-the-vocabularies">The name of the schema that contains the vocabularies<a class="anchor" aria-label="anchor" href="#the-name-of-the-schema-that-contains-the-vocabularies"></a>
</h3>
<p>vocabulary_database_schema&lt;-cdm_database_schema</p>
</div>
<div class="section level3">
<h3 id="the-name-of-the-schema-where-results-tables-will-be-created">The name of the schema where results tables will be created<a class="anchor" aria-label="anchor" href="#the-name-of-the-schema-where-results-tables-will-be-created"></a>
</h3>
<p>results_database_schema&lt;-Sys.getenv(“DB_WRITE_SCHEMA”)</p>
</div>
<div class="section level3">
<h3 id="create-cdm-reference">create cdm reference<a class="anchor" aria-label="anchor" href="#create-cdm-reference"></a>
</h3>
<p>cdm &lt;- CDMConnector::cdm_from_con(con,<br>
cdm_schema = cdm_database_schema,<br>
write_schema = results_database_schema)</p>
<div class="section level6">
<h6 id="add-your-table-to-the-cdm-and-call-it-mothertable-and-babytable-if-present">add your table to the cdm and call it mothertable and babytable (if
present)<a class="anchor" aria-label="anchor" href="#add-your-table-to-the-cdm-and-call-it-mothertable-and-babytable-if-present"></a>
</h6>
<p>cdm<span class="math inline">$mothertable &lt;- dplyr::tbl(con,
sql("SELECT * FROM CDM_NAME.TABLE_NAME")) cdm$</span>babytable &lt;-
dplyr::tbl(con, sql(“SELECT * FROM CDM_NAME.TABLE_NAME”))</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Theresa Burkard.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
