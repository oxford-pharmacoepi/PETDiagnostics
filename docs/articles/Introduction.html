<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction • PETDiagnostics</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PETDiagnostics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Checks.html">Checks</a></li>
    <li><a class="dropdown-item" href="../articles/Introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/Summary.html">Summary</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="Introduction_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="Introduction_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="Introduction_files/datatables-binding-0.31/datatables.js"></script><link href="Introduction_files/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="Introduction_files/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="Introduction_files/dt-core-1.13.6/js/jquery.dataTables.min.js"></script><link href="Introduction_files/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="Introduction_files/crosstalk-1.2.1/js/crosstalk.min.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Introduction</h1>
            
      

      <div class="d-none name"><code>Introduction.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://oxford-pharmacoepi.github.io/PETDiagnostics/">PETDiagnostics</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu.github.io/CDMConnector/" class="external-link">CDMConnector</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: package 'CDMConnector' was built under R version 4.3.3</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/DT" class="external-link">DT</a></span><span class="op">)</span></span></code></pre></div>
<p>Here we use the mockdata for training purposes. But ideally, you use
your real data, so just connect to your database (if you are not already
connected). The idea would be to name these new cdm tables in the future
mothertable and babytable.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cdm</span> <span class="op">&lt;-</span>  <span class="fu">PETDiagnostics</span><span class="fu">::</span><span class="fu"><a href="../reference/mockPregnancy.html">mockPregnancy</a></span><span class="op">(</span>mothertable <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                          babytable <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                          pregnancy_size <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                          fetus_size <span class="op">=</span> <span class="fl">110</span>,</span>
<span>                          seed <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p>We can run all available checks at the same time using the
´executeChecks()´ function. This will return a list which contains the
results of each check (information on each check available in the Checks
article) You can also chose only individual checks to run (see Summary
article)</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">PETDiagnostics</span><span class="fu">::</span><span class="fu"><a href="../reference/executeChecks.html">executeChecks</a></span> <span class="op">(</span></span>
<span>  mothertable <span class="op">=</span> <span class="va">cdm</span><span class="op">$</span><span class="va">mothertable</span>,  </span>
<span>  babytable <span class="op">=</span> <span class="va">cdm</span><span class="op">$</span><span class="va">babytable</span>,                  </span>
<span>  checks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"overview"</span>,<span class="st">"annualOverview"</span>,<span class="st">"missing"</span>, <span class="st">"unknown"</span>,<span class="st">"gestationalAge"</span>,<span class="st">"datesAgeDist"</span>,<span class="st">"outcomeMode"</span>,</span>
<span>                                     <span class="st">"fetusesLiveborn"</span>,<span class="st">"fetusid"</span>,<span class="st">"weightDist"</span>,<span class="st">"bitSet"</span><span class="op">)</span>,                       </span>
<span>  minCellCount <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  minGestAge_Days <span class="op">=</span> <span class="fl">21</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>The<code>cdm</code> is the database reference of the OMOP CDM using
the <code>CDMConnector</code> package.<br>
The <code>mothertable</code> is the <code>mothertable</code> in the CDM.
The <code>babytable</code> is the <code>babytable</code> in the CDM.
<code>checks</code> allows to select the checks to be executed, by
default, all the checks will be run. The <code>minCellCount</code> is
minimum number of events to report, numbers lower than this will be
obscured. The number zero will not be obscured´,
<code>minGestAge_Days</code> implies the number of minimum number of
gestational age that may be the minimum for pregnancies to be
recorded.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resultList</span><span class="op">&lt;-</span><span class="fu">PETDiagnostics</span><span class="fu">::</span><span class="fu"><a href="../reference/executeChecks.html">executeChecks</a></span><span class="op">(</span>mothertable <span class="op">=</span> <span class="va">cdm</span><span class="op">$</span><span class="va">mothertable</span>,               </span>
<span>                          babytable <span class="op">=</span> <span class="va">cdm</span><span class="op">$</span><span class="va">babytable</span><span class="op">)</span></span></code></pre></div>
<p>We can then check what results available from ´executeChecks()´
by</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">resultList</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "PETOverviewMother"       "AnnualPETOverviewMother"</span></span>
<span><span class="co">#&gt;  [3] "PETOverviewBaby"         "missingSummaryMother"   </span></span>
<span><span class="co">#&gt;  [5] "missingSummaryBaby"      "unknownSummaryMother"   </span></span>
<span><span class="co">#&gt;  [7] "gestationalAgeMatch"     "valueDatesAgeDist"      </span></span>
<span><span class="co">#&gt;  [9] "outcomeModeMatch"        "fetusesLivebornNumber"  </span></span>
<span><span class="co">#&gt; [11] "fetusIdMatch"            "valueWeightDist"        </span></span>
<span><span class="co">#&gt; [13] "bitSetOverviewAll"       "bitSetOverviewMother"   </span></span>
<span><span class="co">#&gt; [15] "bitSetOverviewBaby"</span></span></code></pre></div>
<p>Let’s take a look at the results. the missingSummaryMother contains
all the variables, their count of missings, and the proportion in
relation to all pregnancies recorded in the mothertable.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">DT</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">datatable</a></span><span class="op">(</span><span class="va">resultList</span><span class="op">$</span><span class="va">missingSummaryMother</span>,</span>
<span>  rownames <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"filter":"none","vertical":false,"data":[["pregnancy_id","person_id","pregnancy_start_date","pregnancy_end_date","gestational_length_in_day","pregnancy_outcome","pregnancy_mode_delivery","pregnancy_single","pregnancy_marital_status","pregnancy_number_fetuses","pregnancy_number_liveborn","prev_pregnancy_gravidity","prev_livebirth_number","prev_stillbirth_number","prev_miscar_number","prev_top_number","prev_top12_number","prev_pregnancy_parity","pregnancy_bmi","pregnancy_outcome_source_value","pregnancy_mode_delivery_source_value","pregnancy_folic","pregnancy_topfa","pregnancy_art","pregnancy_smok","pregnacy_alc","pregnancy_subs"],[0,0,0,0,0,0,0,0,21,0,0,0,0,0,0,0,0,33,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,21,0,0,0,0,0,0,0,0,33,0,0,0,0,0,0,0,0,0],[100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100],[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>variable<\/th>\n      <th>count<\/th>\n      <th>percentage<\/th>\n      <th>Total<\/th>\n      <th>result_obscured<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3]},{"name":"variable","targets":0},{"name":"count","targets":1},{"name":"percentage","targets":2},{"name":"Total","targets":3},{"name":"result_obscured","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p>After running the checks, we can write the CSV files into a zip file
to disk using the <code><a href="../reference/writeResultToDisk.html">writeResultToDisk()</a></code> function.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">PETDiagnostics</span><span class="fu">::</span><span class="fu"><a href="../reference/writeResultToDisk.html">writeResultToDisk</a></span><span class="op">(</span>resultList<span class="op">=</span><span class="va">resultList</span>,</span>
<span>                  databaseId <span class="op">=</span> <span class="st">"your_database_id"</span>, </span>
<span>                  outputFolder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Theresa Burkard.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
