<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Diagnostics for the OMOP perinatal expansion (OMOP) • PETDiagnostics</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Diagnostics for the OMOP perinatal expansion (OMOP)">
<meta name="description" content="This package assesses the feasibility of data sources to implement the perinatal expansion into their OMOP data. The package contains several quality checks to test the feasibility and fitness of the perinatal expansion into the data. The function executeChecks() allows running all checks at once and returns a list containing the results of each check and for each expansion table.">
<meta property="og:description" content="This package assesses the feasibility of data sources to implement the perinatal expansion into their OMOP data. The package contains several quality checks to test the feasibility and fitness of the perinatal expansion into the data. The function executeChecks() allows running all checks at once and returns a list containing the results of each check and for each expansion table.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">PETDiagnostics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/Checks.html">Checks</a></li>
    <li><a class="dropdown-item" href="articles/Introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="articles/Summary.html">Summary</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="petdiagnostics">PETDiagnostics<a class="anchor" aria-label="anchor" href="#petdiagnostics"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>The goal of PETDiagnostics is to assess feasibility of data sources to perform observational studies on pregnancy related topics using the pregnancy extension tables in OHDSI.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of PETDiagnostics like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"oxford-pharmacoepi/PETDiagnostics"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="section level3">
<h3 id="create-a-reference-to-data-in-the-omop-cdm-format">Create a reference to data in the OMOP CDM format<a class="anchor" aria-label="anchor" href="#create-a-reference-to-data-in-the-omop-cdm-format"></a>
</h3>
<p>The PETDiagnostics package is designed to work with data in the OMOP CDM format, so our first step is to create a reference to the data using the CDMConnector package. Here we´ll generate an example reference with simulated data (to see how you would create a reference to your database please consult the CDMConnector package documentation).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://oxford-pharmacoepi.github.io/PETDiagnostics/">PETDiagnostics</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu.github.io/CDMConnector/" class="external-link">CDMConnector</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: package 'CDMConnector' was built under R version 4.2.2</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: package 'dplyr' was built under R version 4.2.2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span></span>
<span></span>
<span><span class="co"># We first need to create a mock database with a cdm reference</span></span>
<span><span class="co"># this function creates a motherTable and a babyTable</span></span>
<span><span class="va">cdm</span><span class="op">&lt;-</span><span class="fu"><a href="reference/mockPregnancy.html">mockPregnancy</a></span><span class="op">(</span>motherTable <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                          babyTable <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                          pregnancy_size <span class="op">=</span> <span class="fl">100</span>,</span>
<span>                          fetus_size <span class="op">=</span> <span class="fl">110</span>,</span>
<span>                          seed <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># this is what the table(s) look like</span></span>
<span><span class="co"># use the motherTable and/or the babyTable depending on your data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">motherTable</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Source:   SQL [6 x 27]</span></span>
<span><span class="co">#&gt; # Database: DuckDB 0.5.1 [tburkard@Windows 10 x64:R 4.2.1/:memory:]</span></span>
<span><span class="co">#&gt;   pregna…¹ perso…² pregnanc…³ pregnanc…⁴ gesta…⁵ pregn…⁶ pregn…⁷ pregn…⁸ pregn…⁹</span></span>
<span><span class="co">#&gt;      &lt;int&gt;   &lt;int&gt; &lt;date&gt;     &lt;date&gt;       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;int&gt;   &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1        1      68 2010-12-05 2011-02-01      58 4092289 4015701 4188539 4095714</span></span>
<span><span class="co">#&gt; 2        2      39 2004-09-01 2005-02-21     173 4081422       0 4188540 4053842</span></span>
<span><span class="co">#&gt; 3        3       1 2019-10-03 2020-01-19     108 4092289       0 4188540 4242253</span></span>
<span><span class="co">#&gt; 4        4      34 2001-05-15 2002-01-08     238  443213       0 4188539 4095714</span></span>
<span><span class="co">#&gt; 5        5      87 2010-05-15 2011-01-14     244 4092289 4125611 4188540 4095714</span></span>
<span><span class="co">#&gt; 6        6      43 2018-03-21 2018-08-13     145       0       0 4188539 4338692</span></span>
<span><span class="co">#&gt; # … with 18 more variables: pregnancy_number_fetuses &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   pregnancy_number_liveborn &lt;int&gt;, prev_pregnancy_gravidity &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   prev_livebirth_number &lt;int&gt;, prev_stillbirth_number &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   prev_miscar_number &lt;int&gt;, prev_top_number &lt;int&gt;, prev_top12_number &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   prev_pregnancy_parity &lt;dbl&gt;, pregnancy_bmi &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   pregnancy_outcome_source_value &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   pregnancy_mode_delivery_source_value &lt;chr&gt;, pregnancy_folic &lt;int&gt;, …</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">babyTable</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Source:   SQL [6 x 8]</span></span>
<span><span class="co">#&gt; # Database: DuckDB 0.5.1 [tburkard@Windows 10 x64:R 4.2.1/:memory:]</span></span>
<span><span class="co">#&gt;   pregnancy_id fetus_id birth_outcome birth_we…¹ birth…² birth…³ birth…⁴ birth…⁵</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;            &lt;dbl&gt;      &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1 1            1              4092289       2447 4188540 4188539 4188540       6</span></span>
<span><span class="co">#&gt; 2 2            2              4092289       1827 4188540 4188540 4188539      10</span></span>
<span><span class="co">#&gt; 3 3            3              4092289       1056 4188539 4188539 4188539       0</span></span>
<span><span class="co">#&gt; 4 4            4                   NA        786 4188539 4188539 4188539      10</span></span>
<span><span class="co">#&gt; 5 5            5              4092289       3716 4188540 4188539 4188539       8</span></span>
<span><span class="co">#&gt; 6 6            6               443213       4201 4188540 4188540 4188539       7</span></span>
<span><span class="co">#&gt; # … with abbreviated variable names ¹​birth_weight, ²​birth_con_malformation,</span></span>
<span><span class="co">#&gt; #   ³​birth_sga, ⁴​birth_fgr, ⁵​birth_apgar</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="execute-the-diagnostic-checks-of-your-tables">Execute the diagnostic checks of your table(s)<a class="anchor" aria-label="anchor" href="#execute-the-diagnostic-checks-of-your-tables"></a>
</h2>
<div class="section level3">
<h3 id="if-both-tables-are-available-all-checks-are-possible">if both tables are available, all checks are possible<a class="anchor" aria-label="anchor" href="#if-both-tables-are-available-all-checks-are-possible"></a>
</h3>
</div>
<div class="section level3">
<h3 id="if-only-the-mothertable-is-available-the-fetusid-and-weightdist-check-is-not-possible-put-babytable--null">if only the motherTable is available, the “fetusid” and “weightDist” check is not possible, put babyTable = NULL<a class="anchor" aria-label="anchor" href="#if-only-the-mothertable-is-available-the-fetusid-and-weightdist-check-is-not-possible-put-babytable--null"></a>
</h3>
</div>
<div class="section level3">
<h3 id="if-only-the-babytable-is-available-only-the-overview-missing-weightdist-and-bitset-check-is-possible-put-mothertable--null">if only the babyTable is available, only the “overview”, “missing”, “weightDist”, and “bitSet” check is possible, put motherTable = NULL<a class="anchor" aria-label="anchor" href="#if-only-the-babytable-is-available-only-the-overview-missing-weightdist-and-bitset-check-is-possible-put-mothertable--null"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resultList</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/executeChecks.html">executeChecks</a></span> <span class="op">(</span></span>
<span>                          motherTable <span class="op">=</span> <span class="va">cdm</span><span class="op">$</span><span class="va">motherTable</span>,               </span>
<span>                          babyTable <span class="op">=</span> <span class="va">cdm</span><span class="op">$</span><span class="va">babyTable</span>,                  </span>
<span>                          checks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"overview"</span>,<span class="st">"annualOverview"</span>,<span class="st">"missing"</span>, <span class="st">"unknown"</span>,<span class="st">"gestationalAge"</span>,<span class="st">"datesAgeDist"</span>,<span class="st">"outcomeMode"</span>,</span>
<span>                                     <span class="st">"fetusesLiveborn"</span>,<span class="st">"fetusid"</span>,<span class="st">"weightDist"</span>,<span class="st">"bitSet"</span><span class="op">)</span>,                       </span>
<span>                          minCellCount <span class="op">=</span> <span class="fl">5</span>,</span>
<span>                          minGestAge_Days <span class="op">=</span> <span class="fl">21</span>,</span>
<span>                          verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; Warning: attributes are not identical across measure variables; they will be</span></span>
<span><span class="co">#&gt; dropped</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; No id variables; using all as measure variables</span></span>
<span><span class="co">#&gt; Warning: attributes are not identical across measure variables; they will be</span></span>
<span><span class="co">#&gt; dropped</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="exporting-results">Exporting results<a class="anchor" aria-label="anchor" href="#exporting-results"></a>
</h2>
<div class="section level3">
<h3 id="resultlist-is-the-named-list-with-results">resultList is the named list with results<a class="anchor" aria-label="anchor" href="#resultlist-is-the-named-list-with-results"></a>
</h3>
</div>
<div class="section level3">
<h3 id="databaseid-is-the-database-identifier">databaseId is the database identifier<a class="anchor" aria-label="anchor" href="#databaseid-is-the-database-identifier"></a>
</h3>
</div>
<div class="section level3">
<h3 id="outputfolder-is-the-folder-to-write-to">outputFolder is the folder to write to<a class="anchor" aria-label="anchor" href="#outputfolder-is-the-folder-to-write-to"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/writeResultToDisk.html">writeResultToDisk</a></span> <span class="op">(</span>resultList <span class="op">=</span> <span class="va">resultList</span>, databaseId <span class="op">=</span> <span class="st">"mock"</span>, outputFolder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing PETDiagnostics</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Theresa Burkard <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-1313-4473" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Theresa Burkard.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
